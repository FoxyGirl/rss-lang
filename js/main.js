(()=>{"use strict";var t={370:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},109:()=>{console.log("%c%s","color: blue","Самооценка Score: 165 / 220"),console.log('\n1) Стартовая страница и навигация +20\n[x] вёрстка, дизайн, UI стартовой страницы приложения +10\n[x] реализована навигация по страницам приложения +10\n\n2) Настройки +15/40\n[x] в настройках есть возможность включать/выключать звук, есть регулятор громкости звука. Если звук включён, есть звуковая индикация разная для правильных и неправильных ответов, звуковое сопровождение окончания раунда +10\n[ ] в настройках есть возможность включать/выключать игру на время 0\n[ ] в настройках можно указать время для ответа на вопрос 0\n[±] при перезагрузке страницы приложения выбранные настройки сохраняются +5/10\n\n3) Страница категорий +30\n[x] вёрстка, дизайн, UI страницы категории +10\n[x] карточка сыгранной категории внешне отличается от карточки категории, которая ещё не игралась +10\n[x] на карточке сыгранной категории отображается результат прохождения раунда - количество вопросов, на которые был дан правильный ответ +10\n\n4) Страница с вопросами +50\n[x] вёрстка, дизайн, UI страницы с вопросами +10\n[x] варианты ответов на вопросы генерируются случайным образом +10\n[x] правильным и неправильным ответам пользователя соответствуют индикаторы разного цвета +10\n[x] после того, как ответ выбран, появляется модальное окно с правильным ответом на вопрос и кнопкой "Продолжить". При клике по кнопке "Продолжить" пользователь переходит к следующему вопросу категории +10\n[x] после окончания раунда выводится уведомление об окончании раунда и его результат - количество вопросов, на которые был дан правильный ответ.\n\n5) Страница с результатами +50\n[x] вёрстка, дизайн, UI страницы с результатами. Выполняются требования к вёрстке и оформлению приложения +10\n[x] страница с результатами содержит превью всех картин категории +10\n[x] картины, на вопросы про которые или про их авторов был дан правильный ответ, цветные; картины, на вопросы про которые или про их авторов был дан неправильный ответ, черно-белые +10\n[x] при клике по картине выводится информация о ней - название, автор, год создания +10\n[x] если раунд переигрывался, и результаты изменились, эти изменения отображаются на странице с результатами +10\n\n6) Плавная смена изображений; картинки сначала загружаются, потом отображаются; нет ситуации, когда пользователь видит частично загрузившиеся изображения 0\n7) Реализована анимация отдельных деталей интерфейса, также анимированы переходы и взаимодействия, чтобы работа с приложением шла плавным и непрерывным потоком 0\n8) Реализована анимация отдельных деталей интерфейса, также анимированы переходы и взаимодействия, чтобы работа с приложением шла плавным и непрерывным потоком 0\n')},221:(t,e,n)=>{t.exports=n.p+"assets/svg/rss-logo-white.svg"}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="",n.b=document.baseURI||self.location.href,(()=>{var t=n(370),e=n.n(t),r=new URL(n(221),n.b);e()(r),n(109);const s=function(){function t(e){var n=this,r=e.routesActions,s=e.callback;this.routes=[],this.defaultRoute="",this.getPageAndParam=function(t){if(t.includes("?")){var e=t.split("?");return{page:e[0],param:e[1]}}return n.routes.includes(t)?{page:t}:{page:n.defaultRoute}},this.getCurrentRoute=function(){return n.currentRoute},this.switchRoute=function(){var e=window.location.href.split("#").pop();if(e){var r=n.getPageAndParam(e),s=r.page,i=r.param,a=document.querySelector(".".concat(t.ACTIVE_CLASSNAME));a&&a.classList.remove(t.ACTIVE_CLASSNAME),n.currentRoute=s,n.param=i,"function"==typeof n.callback&&n.callback(),n.routesActions[s]();var o=document.querySelector('[href="#'.concat(s,'"]'));o&&o.classList.add(t.ACTIVE_CLASSNAME)}},this.routes=Object.keys(r);var i=this.routes[0];this.defaultRoute=i,this.currentRoute=this.defaultRoute,this.routesActions=r,this.callback=s}return t.prototype.init=function(){window.addEventListener("hashchange",this.switchRoute),window.addEventListener("load",this.switchRoute)},t.ACTIVE_CLASSNAME="nav__link--active",t}();var i="app",a="https://rss-lang-backend.herokuapp.com",o="group=";const c=function(){function t(){}return t.prototype.draw=function(){document.getElementById(i).innerHTML='\n    <div class="description-page__container">\n    <section class="description">\n      <h1 class="description__title">RSLang - удобное приложение для изучения английского языка!</h1>\n      <p class="description__text">Приложение для эффективного изучения иностранных слов в игровой форме.</p>\n      <p class="description__text">Включает в себя учебник и две мини-игры, которые сделают процесс изучения более интересным.</p>\n      <p class="description__text">Кроме того, для зарегистрированных пользователей есть возможность посмотреть статистику о своём процессе изучения.</p>\n    </section>\n    <section class="description team">\n      <div class="description__container">\n        <h2 class="description__title">О команде</h2>\n        <div class="team__item">\n          <div class="team__photo elena"></div>\n          <div class="team__description">\n            <h3 class="description__subtitle">Елена Павлова <span>team lead, developer</span></h3>\n            <p class="description__text">Координировала работу команды.\n              <br/> Разработала архитектуру приложения.\n              <br/> Сделала учебник. Сделала базовые настройки проекта, начальную компоновку, настройку роутера, формы входа/регистрации.</p>\n            <a class="description__link" href="https://github.com/FoxyGirl" target="_blank" >FoxyGirl</a>\n          </div>\n        </div>\n        <div class="team__item">\n          <div class="team__photo alexi"></div>\n          <div class="team__description">\n            <h3 class="description__subtitle">Алексей Гурбан <span>developer</span></h3>\n            <p class="description__text">Разработал игры "Спринт" и " Аудиовызов". <br/> Cделал сохранение результатов игр на сервер и страницу статистики.\n              <br/> Оформил главную страницу.</p>\n            <a class="description__link" href="https://github.com/alexiStalin" target="_blank">alixiStalin</a>\n          </div>\n        </div>\n      </div>\n    </section> \n  </div>'},t}();var u,l,d;!function(t){t.currentPage="currentPage",t.token="token",t.refreshToken="refreshToken",t.userId="userId",t.userName="userName"}(u||(u={})),function(t){t.login="Войти",t.logout="Выйти",t.signup="Зарегистрироваться"}(l||(l={})),function(t){t.difficultyHard="hard",t.learnt="learnt"}(d||(d={}));var h=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}))},p=function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};const f=new(function(){function t(){this.getLocalToken=function(){return localStorage.getItem(u.token)},this.getLocalRefreshToken=function(){return localStorage.getItem(u.refreshToken)},this.getLocalUserId=function(){return localStorage.getItem(u.userId)}}var e;return t.prototype.getNewToken=function(){return h(this,void 0,void 0,(function(){var e;return p(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/tokens"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getLocalRefreshToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((e=n.sent()).ok)return[2,e.json()];throw new Error("status ".concat(e.status," / ").concat(e.statusText))}}))}))},t.prototype.repeatRequest=function(t){return h(this,void 0,void 0,(function(){var e,n,r;return p(this,(function(s){switch(s.label){case 0:return[4,this.getNewToken()];case 1:return e=s.sent(),n=e.token,r=e.refreshToken,localStorage.setItem(u.token,n),localStorage.setItem(u.refreshToken,r),[2,t()]}}))}))},t.prototype.getWords=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=0),h(this,void 0,void 0,(function(){var r;return p(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(t.words,"?page=").concat(e,"&group=").concat(n))];case 1:if((r=s.sent()).ok)return[2,r.json()];throw new Error("status ".concat(r.status," / ").concat(r.statusText))}}))}))},t.prototype.getWord=function(e){return h(this,void 0,void 0,(function(){var n;return p(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(t.words,"/").concat(e))];case 1:if((n=r.sent()).ok)return[2,n.json()];throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.getUser=function(e){return h(this,void 0,void 0,(function(){var n,r=this;return p(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(t.users,"/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(401===n.status)return[2,this.repeatRequest((function(){return r.getUser(e)}))];throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.createUser=function(e){return h(this,void 0,void 0,(function(){var n,r;return p(this,(function(s){switch(s.label){case 0:return[4,fetch(t.users,{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(417===n.status)throw r="Юзер с такой почтой уже зарегистрирован",console.error(r),new Error(r);throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.signin=function(e){return h(this,void 0,void 0,(function(){var n,r;return p(this,(function(s){switch(s.label){case 0:return[4,fetch(t.signin,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(403===n.status)throw r="Неверный пароль или email",console.error(r),Error(r);throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.getUserStatistics=function(){return h(this,void 0,void 0,(function(){var e,n=this;return p(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/statistics"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((e=r.sent()).ok)return[2,e.json()];if(401===e.status)return[2,this.repeatRequest((function(){return n.getUserStatistics()}))];if(404===e.status)return[2,{learnedWords:0,optional:{statistics:{audio:[],sprint:[]}}}];throw new Error("status ".concat(e.status," / ").concat(e.statusText))}}))}))},t.prototype.updateUserStatistics=function(e){return h(this,void 0,void 0,(function(){var n,r=this;return p(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/statistics"),{method:"PUT",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(401===n.status)return[2,this.repeatRequest((function(){return r.updateUserStatistics(e)}))];throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.getUserWords=function(){return h(this,void 0,void 0,(function(){var e,n=this;return p(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/words"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((e=r.sent()).ok)return[2,e.json()];if(401===e.status)return[2,this.repeatRequest((function(){return n.getUserWords()}))];throw new Error("status ".concat(e.status," / ").concat(e.statusText))}}))}))},t.prototype.createUserWord=function(e,n){return h(this,void 0,void 0,(function(){var r,s=this;return p(this,(function(i){switch(i.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/words/").concat(e),{method:"POST",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((r=i.sent()).ok)return[2,r.json()];if(401===r.status)return[2,this.repeatRequest((function(){return s.createUserWord(e,n)}))];throw new Error("status ".concat(r.status," / ").concat(r.statusText))}}))}))},t.prototype.getUserWord=function(e){return h(this,void 0,void 0,(function(){var n,r=this;return p(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/words/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(401===n.status)return[2,this.repeatRequest((function(){return r.getUserWord(e)}))];throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},t.prototype.updateUserWord=function(e,n){return h(this,void 0,void 0,(function(){var r,s=this;return p(this,(function(i){switch(i.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/words/").concat(e),{method:"PUT",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((r=i.sent()).ok)return[2,r.json()];if(401===r.status)return[2,this.repeatRequest((function(){return s.updateUserWord(e,n)}))];throw new Error("status ".concat(r.status," / ").concat(r.statusText))}}))}))},t.prototype.deleteUserWord=function(e){return h(this,void 0,void 0,(function(){var n,r=this;return p(this,(function(s){switch(s.label){case 0:return[4,fetch("".concat(t.users,"/").concat(this.getLocalUserId(),"/words/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.getLocalToken()),Accept:"application/json","Content-Type":"application/json"}})];case 1:if((n=s.sent()).ok)return[2,n.json()];if(401===n.status)return[2,this.repeatRequest((function(){return r.deleteUserWord(e)}))];throw new Error("status ".concat(n.status," / ").concat(n.statusText))}}))}))},e=t,t.baseURL=a,t.words="".concat(e.baseURL,"/words"),t.users="".concat(e.baseURL,"/users"),t.signin="".concat(e.baseURL,"/signin"),t}());var v=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},g=function(){return localStorage.setItem(u.currentPage,String(0))},m=function(){var t=localStorage.getItem(u.currentPage);return t?Number(t):null};function _(t){return t.sort((function(){return Math.random()-.5})),t}var y=function(){var t=new Date;return"".concat(t.getDate(),".").concat(t.getMonth()+1,".").concat(t.getFullYear())},w=function(t,e,n){return r=void 0,s=void 0,a=function(){var r,s,i,a,o,c,u;return function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(l){switch(l.label){case 0:return[4,f.getUserStatistics()];case 1:return r=l.sent(),s=Object.keys(t).length,i=Object.values(t).reduce((function(t,e){return e?t+1:t}),0),a=function(t){var e=0,n=0;for(var r in t)!0===t[r]?n+=1:(e=n>e?n:e,n=0);return e}(t),o=function(t,e){return Object.entries(e).reduce((function(e,n){var r=n[0];return n[1]?v(v([],e,!0),[t[Number(r)].word],!1):e}),[])}(e,t),c=function(t,e){return Object.keys(e).map((function(e){return t[Number(e)].word}))}(e,t),u=Object.keys(r.optional.statistics[n]).length,r.optional.statistics[n][u]={date:y(),maxRightAnswers:a,countRightAnswers:i,countNumQuestions:s,learningWords:o,useWords:c},delete r.id,[4,f.updateUserStatistics(r)];case 2:return l.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{c(a.next(t))}catch(t){e(t)}}function o(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,o)}c((a=a.apply(r,s||[])).next())}));var r,s,i,a};const b=function(){function t(t){var e=this,n=t.maxPage;this.getPaginationActives=function(t){return{isNextActive:t<e.maxPage,isPrevActive:t>0}},this.page=0,this.maxPage=n}return t.prototype.draw=function(t){var e=this,n=t.currentPage,r=void 0===n?0:n,s=t.onChangePage,a=t.hasPages;this.page=r;var o=this.getPaginationActives(this.page),c=o.isNextActive,u=o.isPrevActive,l=document.getElementById(i),d=l.querySelector(".pagintation"),h=a?'\n      <button class="btn  btn--prev">Prev</button>\n        <span class="pagintaion__current-page">'.concat(this.page+1," / ").concat(this.maxPage+1,'</span>\n      <button class="btn  btn--next">Next</button>\n    '):"",p='\n    <div class="pagintation__container">\n      '.concat(h,"\n    </div>\n    ");if(d)d.innerHTML=p;else{var f=document.createElement("section");f.classList.add("pagintation"),f.innerHTML=p,l.appendChild(f)}if(a){var v=document.querySelector(".btn--next"),g=document.querySelector(".btn--prev");v.disabled=!c,g.disabled=!u,v.addEventListener("click",(function(){var t=e.getPaginationActives(e.page+1),n=t.isNextActive,r=t.isPrevActive;e.page+=1,s(e.page),e.update({isNextActive:n,isPrevActive:r,newPage:e.page})})),g.addEventListener("click",(function(){var t=e.getPaginationActives(e.page-1),n=t.isNextActive,r=t.isPrevActive;e.page-=1,s(e.page),e.update({isNextActive:n,isPrevActive:r,newPage:e.page})}))}},t.prototype.update=function(t){var e=t.isNextActive,n=t.isPrevActive,r=t.newPage,s=document.querySelector(".btn--next"),i=document.querySelector(".btn--prev"),a=document.querySelector(".pagintaion__current-page");s.disabled=!e,i.disabled=!n,a.textContent="".concat(r+1," / ").concat(this.maxPage+1)},t}(),A=function(){function t(e){var n=this,r=e.src,s=e.volume,i=e.isAllowedSound,a=void 0!==i&&i;this.play=function(){n.sound.play(),n.isAllowedSound=!0},this.rePlay=function(){n.sound.currentTime=0,n.sound.play(),n.isAllowedSound=!0},this.stop=function(){n.sound.pause(),n.isAllowedSound=!1},this.isNotAudioSrc=function(){return!n.sound.src},this.isNotAudioSet=function(){return 0===n.audioSet.length},this.setSound=function(e){n.audioSet=e.reverse();var r=n.audioSet.pop();n.sound.src="".concat(t.BASE_SRC).concat(r),n.isAllowedSound=!1,n.sound.addEventListener("ended",n.handleSetAudio)},this.handleSetAudio=function(){if(n.audioSet.length>0){var e=n.audioSet.pop();n.sound.src="".concat(t.BASE_SRC).concat(e),n.play()}},this.reset=function(){n.stop(),n.audioSet=[]},this.isAllowedSound=a,this.sound=document.createElement("audio"),this.sound.src=r||"",this.sound.volume=s||1,this.audioSet=[]}return t.BASE_SRC="https://rss-words-3.herokuapp.com/",t}(),S=function(){function t(){}return t.prototype.draw=function(t){void 0===t&&(t="#".concat(i)),document.querySelector(t).innerHTML='\n        <div class="loader">\n            <div class="lds-roller">\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n            </div>\n        </div>\n        '},t}();var x=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}))},L=function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},T=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))};const k=function(){function t(t){var e=this,n=t.group,r=void 0===n?0:n,s=t.onHandlePageChange,i=t.onHandleGameClick;this.isAuthorized=!1,this.drawCard=function(t){var n=t.id,r=t.word,s=t.image,i=t.transcription,a=t.wordTranslate,o=t.textMeaning,c=t.textExample,u=t.textMeaningTranslate,l=t.textExampleTranslate,h=t.difficulty===d.difficultyHard?"cards__item--hard":"";return'\n    <li class="cards__item group--'.concat(e.group+1,"  ").concat(h,'" data-id=').concat(n,'>\n      <div class="cards__main">\n        <img src="https://rss-words-3.herokuapp.com/').concat(s,'" alt="').concat(r,'" class="cards__img">\n        <div class="cards__info">\n          <div class="cards__word">').concat(r,'</div>\n          <div class="cards__details">\n            <span class="cards__translate">').concat(a,'</span>\n            <span class="cards__transcription">').concat(i,'</span>\n            <button class="btn btn--sound"></button>\n          </div>\n        </div>\n      </div>\n      <div class="cards__description">\n        <p class="cards__meaning">').concat(o,'</p>\n        <p class="cards__example">').concat(c,'</p>\n      </div>\n      <div class="cards__description">\n        <p class="cards__meaning">').concat(u,'</p>\n        <p class="cards__example">').concat(l,"</p>\n      </div>\n      ").concat(e.drawButtons(),"\n    </li>\n    ")},this.resetPage=function(t){"A"===t.target.tagName&&(g(),e.onHandlePageChange({group:e.group,page:0}))},this.changePage=function(t){e.page=t,e.updateCardsSection(),e.sound.reset(),e.onHandlePageChange({group:e.group,page:e.page})},this.data=[],this.page=0,this.group=r,this.pagination=new b({maxPage:29}),this.sound=new A({}),this.wordId=null,this.onHandlePageChange=s,this.onHandleGameClick=i,this.loader=new S}return t.prototype.getWords=function(){return x(this,void 0,void 0,(function(){var t,e=this;return L(this,(function(n){switch(n.label){case 0:return this.isAuthorized&&this.group<6?[4,f.getWords(this.page,this.group).then((function(t){e.data=t;var n=t.map((function(t){var e=t.id;return f.getUserWord(e)}));return Promise.allSettled(n)})).then((function(t){t.forEach((function(t,n){if("fulfilled"===t.status){var r=t.value;e.data[n].difficulty=r.difficulty}}))})).catch(console.error)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.isAuthorized&&6===this.group?(t=[],[4,f.getUserWords().then((function(e){console.log("///// data = ",e),t=e.map((function(t){return{difficulty:t.difficulty}}));var n=e.map((function(t){var e=t.wordId;return f.getWord(e)}));return Promise.allSettled(n)})).then((function(n){console.log("///// dataOptional = ",n),e.data=n.reduce((function(e,n,r){if("fulfilled"===n.status&&n.value){var s=n.value;return s.difficulty=t[r].difficulty,T(T([],e,!0),[s],!1)}return e}),[]),console.log("///// this.data = ",e.data)})).catch(console.error)]):[3,4];case 3:n.sent(),n.label=4;case 4:return this.isAuthorized?[3,6]:[4,f.getWords(this.page,this.group).then((function(t){e.data=t})).catch(console.error)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.init=function(t){var e=t.group,n=void 0===e?0:e,r=t.page,s=void 0===r?0:r,i=t.isAuthorized,a=void 0!==i&&i;return x(this,void 0,void 0,(function(){return L(this,(function(t){switch(t.label){case 0:return this.group=n,this.page=s,this.isAuthorized=a,console.log("======= this.group",this.group),[4,this.getWords()];case 1:return t.sent(),this.isAuthorized||6!==this.group||(window.location.href="#tutorial"),console.log("this.data = ",this.data),this.clear(),0===this.data.length?this.drawEmpty():this.drawCards(),this.pagination.draw({hasPages:6!==this.group,currentPage:s,onChangePage:this.changePage}),this.drawGamesLinks(),this.drawGroupLinks(),[2]}}))}))},t.prototype.clear=function(){document.getElementById(i).innerHTML=""},t.prototype.drawEmpty=function(){document.getElementById(i).innerHTML='\n      <h2 class="cards__empty">Слов для этого раздела не найдено :/</h2>\n    '},t.prototype.drawCards=function(){var t=this,e=document.getElementById(i),n=document.createElement("div");n.innerHTML='\n    <section class="cards">\n        <ul class="cards__list">\n          '.concat(this.data.map(this.drawCard).join(""),"\n        </ul>\n      </section>\n    "),e.appendChild(n),document.querySelector(".cards__list").addEventListener("click",(function(e){return x(t,void 0,void 0,(function(){var t,n,r,s,i,a,o,c,u,l,h,p=this;return L(this,(function(v){switch(v.label){case 0:return"BUTTON"===(t=e.target).tagName&&t.classList.contains("btn--sound")&&(o=t.closest(".cards__item"),((null===(u=o.dataset)||void 0===u?void 0:u.id)!==this.wordId||this.sound.isNotAudioSet())&&(this.wordId=(null===(l=o.dataset)||void 0===l?void 0:l.id)||null,n=this.data.find((function(t){return t.id===p.wordId})),n&&(r=n.audio,s=n.audioExample,i=n.audioMeaning,this.sound.setSound([r,i,s]))),this.sound.isAllowedSound?this.sound.stop():this.sound.play(),(a=document.querySelector(".btn--mute"))&&a!==t&&a.classList.remove("btn--mute"),t.classList.toggle("btn--mute")),"BUTTON"===t.tagName&&t.classList.contains("btn--hard")?(o=t.closest(".cards__item"),(c=null===(h=o.dataset)||void 0===h?void 0:h.id)?[4,f.createUserWord(c,{difficulty:d.difficultyHard}).catch(console.error)]:[3,3]):[3,3];case 1:return v.sent(),[4,f.getUserWord(c).then((function(e){document.querySelector('.cards__item[data-id="'.concat(e.wordId,'"]')).classList.add("cards__item--hard"),t.setAttribute("disabled","true")})).catch(console.error)];case 2:v.sent(),v.label=3;case 3:return[2]}}))}))})),this.disableHardBtns()},t.prototype.disableHardBtns=function(){this.data.filter((function(t){return t.difficulty===d.difficultyHard})).forEach((function(t){document.querySelector('.cards__item[data-id="'.concat(t.id,'"] .btn--hard')).disabled=!0}))},t.prototype.drawButtons=function(){if(!this.isAuthorized)return"";var t=6===this.group?"Удалить":"Сложное";return'\n    <div class="cards__buttons">      \n      <button class="btn btn--hard">'.concat(t,'</button>\n      <button class="btn btn--learnt">Изученное</button>\n    </div>\n    ')},t.prototype.updateCardsSection=function(){return x(this,void 0,void 0,(function(){var t;return L(this,(function(e){switch(e.label){case 0:return t=document.querySelector(".cards__list"),this.loader.draw(".cards__list"),[4,this.getWords()];case 1:return e.sent(),document.querySelector(".loader").remove(),t.innerHTML=this.data.map(this.drawCard).join(""),this.disableHardBtns(),[2]}}))}))},t.prototype.drawGroupLinks=function(){var t=this,e=document.createElement("section");e.classList.add("nav-groups"),e.innerHTML='\n    <ul class="nav-groups__list">\n      '.concat(T([],Array(6),!0).map((function(e,n){var r=n===t.group?"nav-groups__item--active":"";return'\n              <li class="nav-groups__item '.concat(r,'">\n                <a href="#tutorialPage?group=').concat(n+1,'">').concat(n+1,"</a>\n              </li>\n            ")})).join(""),"\n        ").concat(this.isAuthorized?'\n            <li class="nav-groups__item '.concat(6===this.group?"nav-groups__item--active":"",'">\n                <a href="#tutorialPage?group=').concat(7,'">').concat(7,"</a>\n              </li>\n            "):"","\n    </ul>\n    "),document.querySelector(".pagintation__container").appendChild(e),e.addEventListener("click",this.resetPage)},t.prototype.drawGamesLinks=function(){var t=this,e=document.createElement("section");e.classList.add("nav-games"),e.innerHTML='\n    <ul class="nav-games__list">\n      <li class="nav-games__item">\n        <a href="#sprintGame?group='.concat(this.group+1,'" class="btn">Спринт</a>\n      </li>\n      <li class="nav-games__item">\n        <a href="#audioGame?group=').concat(this.group+1,'" class="btn">Аудивызов</a>\n      </li>\n    </ul>\n    '),document.querySelector(".pagintation__container").appendChild(e),document.querySelector(".nav-games").addEventListener("click",(function(e){"A"===e.target.tagName&&t.onHandleGameClick()}))},t}();var I=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}))},P=function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};const E=function(){function t(){var t=this;this.handleMouse=function(e){return I(t,void 0,void 0,(function(){var t,n,r,s,a;return P(this,(function(o){switch(o.label){case 0:if(t=document.getElementById(i),(n=e.target).classList.contains("audiobattle__answer-btn")){for(r=Number(n.dataset.index),document.querySelector(".audiobattle__correct-answer-container").innerHTML=this.drawAnswer(this.data,this.rightAnswerIndex),s=document.querySelectorAll(".audiobattle__answer-btn"),a=0;a<s.length;a+=1)s[a].setAttribute("disabled","disabled"),s[a].dataset.index===String(this.rightAnswerIndex)?s[a].classList.add("true"):s[a].classList.add("false");document.querySelector(".audiobattle__next-question--container").innerHTML=this.drawNextQuestion(),this.rightAnswerIndex===r?(this.result[this.rightAnswerIndex]=!0,this.sounds.correct.rePlay()):(this.result[this.rightAnswerIndex]=!1,this.sounds.wrong.rePlay())}return n.classList.contains("audiobattle__btn-play")&&this.playAudio(),n.classList.contains("audiobattle__next")?this.rightAnswerIndex<19?(this.rightAnswerIndex+=1,this.createQuestion(this.data,this.rightAnswerIndex),this.playAudio(),[3,3]):[3,1]:[3,3];case 1:return t.innerHTML=this.drawResults(this.result),[4,w(this.result,this.data,"audio")];case 2:o.sent(),this.playAgain(),this.audioResult(),this.rightAnswerIndex=0,this.result={},o.label=3;case 3:if(n.classList.contains("audiobattle__no-answer-btn")){for(document.querySelector(".audiobattle__correct-answer-container").innerHTML=this.drawAnswer(this.data,this.rightAnswerIndex),this.result[this.rightAnswerIndex]=!1,s=document.querySelectorAll(".audiobattle__answer-btn"),a=0;a<s.length;a+=1)s[a].setAttribute("disabled","disabled"),s[a].dataset.index===String(this.rightAnswerIndex)?s[a].classList.add("true"):s[a].classList.add("false");this.sounds.wrong.rePlay(),document.querySelector(".audiobattle__next-question--container").innerHTML=this.drawNextQuestion()}return n.classList.contains("audiobattle__correct-answer--play")&&this.playAudio(),[2]}}))}))},this.handleKeyboard=function(e){return I(t,void 0,void 0,(function(){var t,n,r,s,a,o,c;return P(this,(function(u){switch(u.label){case 0:if(t=document.getElementById(i),("1"===e.key||"2"===e.key||"3"===e.key||"4"===e.key||"5"===e.key)&&((s=document.querySelector(".audiobattle__next-question--container")).innerHTML=this.drawNextQuestion(),!(n=document.querySelector('.audiobattle__answer-btn[data="'.concat(e.key,'"]'))).hasAttribute("disabled"))){for(o=document.querySelectorAll(".audiobattle__answer-btn"),c=0;c<o.length;c+=1)o[c].setAttribute("disabled","disabled"),o[c].dataset.index===String(this.rightAnswerIndex)?o[c].classList.add("true"):o[c].classList.add("false");r=Number(n.dataset.index),document.querySelector(".audiobattle__correct-answer-container").innerHTML=this.drawAnswer(this.data,this.rightAnswerIndex),this.rightAnswerIndex===r?(this.result[this.rightAnswerIndex]=!0,this.sounds.correct.rePlay()):(this.result[this.rightAnswerIndex]=!1,this.sounds.wrong.rePlay())}return" "===e.key&&this.playAudio(),"Enter"!==e.key?[3,4]:(s=document.querySelector(".audiobattle__next-question--container"),a=document.querySelector(".audiobattle__no-answer-btn"),document.querySelector(".audiobattle__correct-answer-container").innerHTML=this.drawAnswer(this.data,this.rightAnswerIndex),this.rightAnswerIndex<19&&null===a?(this.rightAnswerIndex+=1,this.createQuestion(this.data,this.rightAnswerIndex),this.playAudio(),[3,4]):[3,1]);case 1:return 19!==this.rightAnswerIndex||null!==a?[3,3]:(t.innerHTML=this.drawResults(this.result),[4,w(this.result,this.data,"audio")]);case 2:return u.sent(),this.playAgain(),this.audioResult(),this.rightAnswerIndex=0,this.result={},[3,4];case 3:if(null!==a){for(this.result[this.rightAnswerIndex]=!1,o=document.querySelectorAll(".audiobattle__answer-btn"),c=0;c<o.length;c+=1)o[c].setAttribute("disabled","disabled"),o[c].dataset.index===String(this.rightAnswerIndex)?o[c].classList.add("true"):o[c].classList.add("false");this.sounds.wrong.rePlay(),s.innerHTML=this.drawNextQuestion()}u.label=4;case 4:return[2]}}))}))},this.drawResults=function(e){document.removeEventListener("keypress",t.handleKeyboard);var n=Object.keys(e).length,r=Object.values(e).reduce((function(t,e){return e?t+1:t}),0);return'\n      <div class="result__section">\n      <div class="result__container">\n        <h2 class="result__title">Ваш результат</h2>\n        <h2 class="result__correct-num">Знаю: '.concat(r,"</h2>\n        ").concat(t.drawCorrectResult(t.data,t.result),'\n        <hr class="result__line" />\n        <h2 class="result__wrong-num">Ошибок: ').concat(n-r,"</h2>\n        ").concat(t.drawWrongResult(t.data,t.result),'\n      </div>\n      <div class="result__button-container">\n        <span class="result__btn result__play-again">Играть еще</span><a class="result__btn" href="/#home">Главная</a>\n      </div>\n    </div>\n    ')},this.data=[],this.page=0,this.group=0,this.rightAnswerIndex=0,this.flag=!0,this.result={},this.sounds={wrong:new A({src:"./assets/audio/wrong.mp3"}),correct:new A({src:"./assets/audio/correct.mp3"})}}return t.prototype.selectLevel=function(){return I(this,void 0,void 0,(function(){var t=this;return P(this,(function(e){return document.removeEventListener("keypress",this.handleKeyboard),document.getElementById(i).innerHTML=this.drawSelectLevel(),document.querySelector(".game-select__btn").addEventListener("click",(function(){return I(t,void 0,void 0,(function(){var t,e,n;return P(this,(function(r){switch(r.label){case 0:return 0,29,s=Math.ceil(0),i=Math.floor(29),t=Math.floor(Math.random()*(i-s+1))+s,e=Number(document.querySelector(".game-select__level").value),n=this,[4,f.getWords(t,e)];case 1:return n.data=r.sent(),this.init(),[2]}var s,i}))}))})),[2]}))}))},t.prototype.startFromPage=function(t,e){return I(this,void 0,void 0,(function(){var n;return P(this,(function(r){switch(r.label){case 0:return n=this,[4,f.getWords(e,t)];case 1:return n.data=r.sent(),this.init(),[2]}}))}))},t.prototype.init=function(){this.rightAnswerIndex=0,this.flag=!0,this.result={},null===localStorage.getItem("statistics")&&localStorage.setItem("statistics",JSON.stringify({audiobattle:[],sprint:[]}));var t=document.getElementById(i);t.innerHTML='<div class="audiobattle__section"></div>',this.createQuestion(this.data,this.rightAnswerIndex),this.playAudio(),t.addEventListener("click",this.handleMouse),document.addEventListener("keypress",this.handleKeyboard)},t.prototype.playAgain=function(){var t=this;document.querySelector(".result__play-again").addEventListener("click",(function(){var e=document.getElementById(i);t.rightAnswerIndex=0,t.result={},e.innerHTML='<div class="audiobattle__section"></div>',t.createQuestion(t.data,t.rightAnswerIndex),t.playAudio(),document.addEventListener("keypress",t.handleKeyboard)}))},t.prototype.drawSelectLevel=function(){return'\n    <div class="game-select__container">\n      <h2>Аудиовызов</h2>\n      <div>\n        <p>«Аудиовызов» - это тренировка которая улучшает восприятие речи на слух.</p>\n        <div class="game-select__list-container">\n          <ul class="game-select__list">\n            <li class="game-select__list--item">Используйте мышь, чтобы выбрать.</li>\n            <li class="game-select__list--item">Используйте цифровые клавиши от 1 до 5 для выбора ответа.</li>\n            <li class="game-select__list--item">Используйте клавишу пробел для повторного звучания слова.</li>\n            <li class="game-select__list--item">Используйте клавишу Enter для переходу к следующему слову.</li>\n          </ul>\n        </div>\n      </div>\n      <div class="select-container">\n      <span>Сложность<span/>\n        <select class="game-select__level" name="select">\n          <option value="0" selected>1</option>\n          <option value="1">2</option>\n          <option value="2">3</option>\n          <option value="3">4</option>\n          <option value="4">5</option>\n          <option value="5">6</option>\n        </select>\n        <button class="game-select__btn">Начать</button>\n      </div>\n    </div>\n      '},t.prototype.drawNextQuestion=function(){return'\n      <div class="audiobattle__btn-container">\n        <button class="audiobattle__next">Следующий</button>\n      </div>\n    '},t.prototype.renderQuestion=function(t,e,n){return'\n    <div class="audiobattle__correct-answer-container">\n      <div class="audiobattle__btn-container"> \n        <button class="audiobattle__btn-play">\n          <span class="audiobattle__btn-play-label"\n            ><svg\n              class="audiobattle__btn-play-icon"\n              focusable="false"\n              viewBox="0 0 24 24"\n              aria-hidden="true"\n            >\n              <path\n                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n              ></path></svg></span\n          ><span></span>\n        </button>\n      </div>\n       <div class="audiobattle-right-answer">\n         <audio src="'.concat(a,"/").concat(t[n].audio,'"></audio>\n       </div>\n    </div>\n    <div class="audiobattle__answers">\n    ').concat(e.map((function(e,n){return'<button class="audiobattle__answer-btn" data="'.concat(n+1,'" data-index="').concat(e,'">').concat(n+1,". ").concat(t[e].wordTranslate,"</button>")})).join(""),'\n    </div>\n    <div class="audiobattle__next-question--container">\n      <div class="audiobattle__btn-container">\n        <button class="audiobattle__no-answer-btn">Не знаю</button>\n      </div>\n    <div/>\n    ')},t.prototype.drawAnswer=function(t,e){return'\n    <div class="audiobattle__correct-answer--container">\n      <div class="audiobattle__img-container">\n        <img src="'.concat(a,"/").concat(t[e].image,'" alt="" />\n        <audio src="').concat(a,"/").concat(t[e].audio,'"></audio>\n      </div>\n      <div>\n        <button class="audiobattle__correct-answer--play">\n          <span\n            ><svg\n              focusable="false"\n              viewBox="0 0 24 24"\n              aria-hidden="true"\n            >\n              <path\n                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n              ></path></svg></span\n          ><span></span>\n        </button>\n        <span class="audiobattle__correct-answer-world">').concat(t[e].word,"</span>\n      </div>\n    </div>")},t.prototype.drawCorrectResult=function(t,e){var n="";for(var r in e)!0===e[r]&&(n+='\n        <div class="result__word-container">\n        <button class="result__word-play">\n          <span class="result__word-play--label"\n            ><svg\n              class="result__word-play--icon"\n              focusable="false"\n              viewBox="0 0 24 24"\n              aria-hidden="true"\n            >\n              <path\n                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n              ></path></svg></span\n          ><span></span>\n        </button>\n        <audio src="'.concat(a,"/").concat(t[Number(r)].audio,'"></audio>\n        <div>\n          <span class="result__word">').concat(t[Number(r)].word,'</span><span class="result__word-dash"> - </span\n          ><span class="result__word-translate">').concat(t[Number(r)].wordTranslate,"</span>\n        </div>\n      </div>"));return n},t.prototype.drawWrongResult=function(t,e){var n="";for(var r in e)!1===e[r]&&(n+='\n          <div class="result__word-container">\n              <button class="result__word-play">\n                <span class="result__word-play--label"\n                  ><svg\n                    class="result__word-play--icon"\n                    focusable="false"\n                    viewBox="0 0 24 24"\n                    aria-hidden="true"\n                  >\n                    <path\n                      d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n                    ></path></svg></span\n                ><span></span>\n              </button>\n              <audio src="'.concat(a,"/").concat(t[Number(r)].audio,'"></audio>\n              <div>\n                <span class="result__word">').concat(t[Number(r)].word,'</span><span class="result__word-dash"> - </span\n                ><span class="result__word-translate">').concat(t[Number(r)].wordTranslate,"</span>\n              </div>\n            </div>"));return n},t.prototype.audioResult=function(){document.querySelector(".result__container").addEventListener("click",(function(t){var e=t.target;e.classList.contains("result__word-play")&&e.closest("div").querySelector("audio").play()}))},t.prototype.playAudio=function(){document.querySelector("audio").play()},t.prototype.createQuestion=function(t,e){var n=document.querySelector(".audiobattle__section"),r=_(function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}([],Array(t.length),!0).map((function(t,e){return e}))),s=r.indexOf(e);r.splice(s,1),(r=r.slice(0,4)).push(e),r=_(r),n.innerHTML=this.renderQuestion(t,r,e)},t}();var N=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}))},R=function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};const C=function(){function t(){var t=this;this.handleMouse=function(e){var n=document.getElementById(i),r=e.target;if(r.classList.contains("sprint-page__button-true")){var s=!0;t.changeCorrectAnswer(s),t.rightAnswerIndex+=1,t.rightAnswerIndex<20?(t.createQuestion(),t.createCorrectIndicator(),t.addPoint()):(n.innerHTML=t.drawResults(t.result),t.audioResult(),t.playAgain())}r.classList.contains("sprint-page__button-false")&&(s=!1,t.changeCorrectAnswer(s),t.rightAnswerIndex+=1,t.rightAnswerIndex<20?(t.createQuestion(),t.createCorrectIndicator(),t.addPoint()):(n.innerHTML=t.drawResults(t.result),t.audioResult(),t.playAgain()))},this.handleKeyboard=function(e){var n=document.getElementById(i);if(37===e.keyCode){var r=!0;t.changeCorrectAnswer(r),t.rightAnswerIndex+=1,t.rightAnswerIndex<20?(t.createQuestion(),t.createCorrectIndicator(),t.addPoint()):(n.innerHTML=t.drawResults(t.result),t.audioResult(),t.playAgain())}39===e.keyCode&&(r=!1,t.changeCorrectAnswer(r),t.rightAnswerIndex+=1,t.rightAnswerIndex<20?(t.createQuestion(),t.createCorrectIndicator(),t.addPoint()):(n.innerHTML=t.drawResults(t.result),t.audioResult(),t.playAgain()))},this.createQuestion=function(){var e=document.querySelector(".sprint-page__question"),n=t.data[t.rightAnswerIndex].word;if(t.answerChange=t.getRandomIntInclusive(0,1),1===t.answerChange){var r=t.data[t.rightAnswerIndex].wordTranslate;e.innerHTML=t.renderQuestion(n,r)}else{var s=t.getRandomIntInclusive(0,19,t.rightAnswerIndex);r=t.data[s].wordTranslate,e.innerHTML=t.renderQuestion(n,r)}},this.drawResults=function(e){clearInterval(t.timerId),document.removeEventListener("keyup",t.handleKeyboard);var n=Object.keys(e).length,r=Object.values(e).reduce((function(t,e){return e?t+1:t}),0);return w(t.result,t.data,"sprint"),'\n      <div class="result__section">\n      <div class="result__container">\n        <h2 class="result__title">Ваш результат</h2>\n        <h2 class="result__correct-num">Знаю: '.concat(r,"</h2>\n        ").concat(t.drawCorrectResult(t.data,t.result),'\n        <hr class="result__line" />\n        <h2 class="result__wrong-num">Ошибок: ').concat(n-r,"</h2>\n        ").concat(t.drawWrongResult(t.data,t.result),'\n      </div>\n      <div class="result__button-container">\n        <span class="result__btn result__play-again">Играть еще</span><a class="result__btn" href="/#home">Главная</a>\n      </div>\n    </div>\n    ')},this.data=[],this.page=0,this.group=0,this.rightAnswerIndex=0,this.answerChange=0,this.counterCorrectAnswer=0,this.counterPoints=0,this.timerId=setInterval((function(){})),this.result={},this.sounds={wrong:new A({src:"./assets/audio/wrong.mp3"}),correct:new A({src:"./assets/audio/correct.mp3"})}}return t.prototype.selectLevel=function(){return N(this,void 0,void 0,(function(){var t,e=this;return R(this,(function(n){return(t=document.getElementById(i)).removeEventListener("click",this.handleMouse),document.removeEventListener("keyup",this.handleKeyboard),t.innerHTML=this.drawSelectLevel(),document.querySelector(".game-select__btn").addEventListener("click",(function(){return N(e,void 0,void 0,(function(){var t,e,n;return R(this,(function(r){switch(r.label){case 0:return t=this.getRandomIntInclusive(0,29),e=Number(document.querySelector(".game-select__level").value),n=this,[4,f.getWords(t,e)];case 1:return n.data=r.sent(),this.init(),[2]}}))}))})),[2]}))}))},t.prototype.startFromPage=function(t,e){return N(this,void 0,void 0,(function(){var n;return R(this,(function(r){switch(r.label){case 0:return n=this,[4,f.getWords(e,t)];case 1:return n.data=r.sent(),this.init(),[2]}}))}))},t.prototype.init=function(){return N(this,void 0,void 0,(function(){var t,e;return R(this,(function(n){return t=document.getElementById(i),this.rightAnswerIndex=0,this.answerChange=0,this.counterCorrectAnswer=0,this.counterPoints=0,this.result={},null===localStorage.getItem("statistics")&&(e={audiobattle:[],sprint:[]},localStorage.setItem("statistics",JSON.stringify(e))),t.innerHTML='<div class="sprint-page__time-container"><spans class="sprint-page__time"></spans></div>',t.innerHTML+='<div class="sprint-page__question"><div/>',this.createQuestion(),this.timer(60),t.addEventListener("click",this.handleMouse),document.addEventListener("keyup",this.handleKeyboard),[2]}))}))},t.prototype.playAgain=function(){var t=this;document.querySelector(".result__play-again").addEventListener("click",(function(){var e=document.getElementById(i);t.rightAnswerIndex=0,t.counterCorrectAnswer=0,t.counterPoints=0,t.result={},e.innerHTML='<div class="sprint-page__time-container"><spans class="sprint-page__time"></spans></div>',e.innerHTML+='<div class="sprint-page__question"><div/>',t.createQuestion(),t.timer(60),document.addEventListener("keyup",t.handleKeyboard)}))},t.prototype.audioResult=function(){document.querySelector(".result__container").addEventListener("click",(function(t){var e=t.target;e.classList.contains("result__word-play")&&e.closest("div").querySelector("audio").play()}))},t.prototype.drawSelectLevel=function(){return'\n    <div class="game-select__container">\n          <h2>Спринт</h2>\n          <div>\n            <p>«Спринт» - это тренировка для повторения заученных слов.</p>\n            <div class="game-select__list-container">\n              <ul class="game-select__list">\n                <li class="game-select__list--item">Используйте мышь, чтобы выбрать.</li>\n                <li class="game-select__list--item">Используйте клавиши влево или вправо</li>\n              </ul>\n            </div>\n          </div>\n          <div class="select-container">\n          <span>Сложность<span/>\n            <select class="game-select__level" name="select">\n              <option value="0" selected>1</option>\n              <option value="1">2</option>\n              <option value="2">3</option>\n              <option value="3">4</option>\n              <option value="4">5</option>\n              <option value="5">6</option>\n            </select>\n            <button class="game-select__btn">Начать</button>\n          </div>\n        </div>\n      '},t.prototype.changeCorrectAnswer=function(t){t&&(1===this.answerChange?(this.result[this.rightAnswerIndex]=!0,this.counterCorrectAnswer+=1,this.sounds.correct.rePlay()):(this.result[this.rightAnswerIndex]=!1,this.counterCorrectAnswer=0,this.sounds.wrong.rePlay())),t||(0===this.answerChange?(this.result[this.rightAnswerIndex]=!0,this.counterCorrectAnswer+=1,this.sounds.correct.rePlay()):(this.result[this.rightAnswerIndex]=!1,this.counterCorrectAnswer=0,this.sounds.wrong.rePlay()))},t.prototype.createCorrectIndicator=function(){var t=this.counterCorrectAnswer,e=document.querySelectorAll(".sprint-page__circle"),n="#4caf4fbf";if(0===t)for(var r=0;e.length>r;r+=1)e[r].style.backgroundColor="white";else if(t%3==0||t>12)for(r=0;r<e.length;r+=1)e[r].style.backgroundColor=n;else t%3==1?e[0].style.backgroundColor=n:t%3==2&&(e[0].style.backgroundColor=n,e[1].style.backgroundColor=n)},t.prototype.addPoint=function(){var t=document.querySelector(".sprint-page__result"),e=this.counterCorrectAnswer;1===e||2===e||3===e?this.counterPoints+=10:4===e||5===e||6===e?this.counterPoints+=20:7===e||8===e||9===e?this.counterPoints+=30:e>9&&(this.counterPoints+=40),t.innerHTML="".concat(this.counterPoints)},t.prototype.renderQuestion=function(t,e){return'\n    <div class="sprint-page__section" id="sprint-game-board">\n      <h1 class="sprint-page__result">0</h1>\n      <div class="sprint-page__card">\n        <div class="sprint-page__answer">\n          <div class="sprint-page__circles">\n            <span class="sprint-page__circle"></span><span class="sprint-page__circle"></span><span class="sprint-page__circle"></span>\n          </div>\n            <h2 class="srint-page__word">'.concat(t,'</h2>\n            <h3 class="srint-page__translate">').concat(e,'</h3>   \n        </div>\n        <hr class="sprint-page__line" />\n        <div class="sprint-page__button-container">\n          <button class="sprint-page__button sprint-page__button-true">Верно</button\n          ><button class="sprint-page__button sprint-page__button-false">Неверно</button>\n        </div>\n      </div>\n    </div>\n    ')},t.prototype.drawCorrectResult=function(t,e){var n="";for(var r in e)!0===e[r]&&(n+='\n        <div class="result__word-container">\n        <button class="result__word-play">\n          <span class="result__word-play--label"\n            ><svg\n              class="result__word-play--icon"\n              focusable="false"\n              viewBox="0 0 24 24"\n              aria-hidden="true"\n            >\n              <path\n                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n              ></path></svg></span\n          ><span></span>\n        </button>\n        <audio src="'.concat(a,"/").concat(t[Number(r)].audio,'"></audio>\n        <div>\n          <span class="result__word">').concat(t[Number(r)].word,'</span><span class="result__word-dash"> - </span\n          ><span class="result__word-translate">').concat(t[Number(r)].wordTranslate,"</span>\n        </div>\n      </div>"));return n},t.prototype.timer=function(t){var e=this,n=document.getElementById(i),r=t,s=document.querySelector(".sprint-page__time");s.innerHTML="".concat(r),r-=1,this.timerId=setInterval((function(){r>0&&(s.innerHTML="".concat(r),r-=1),0===r&&(s.innerHTML="".concat(r),clearInterval(e.timerId),n.innerHTML=e.drawResults(e.result),e.audioResult(),e.playAgain())}),1e3)},t.prototype.drawWrongResult=function(t,e){var n="";for(var r in e)!1===e[r]&&(n+='\n          <div class="result__word-container">\n              <button class="result__word-play">\n                <span class="result__word-play--label"\n                  ><svg\n                    class="result__word-play--icon"\n                    focusable="false"\n                    viewBox="0 0 24 24"\n                    aria-hidden="true"\n                  >\n                    <path\n                      d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"\n                    ></path></svg></span\n                ><span></span>\n              </button>\n              <audio src="'.concat(a,"/").concat(t[Number(r)].audio,'"></audio>\n              <div>\n                <span class="result__word">').concat(t[Number(r)].word,'</span><span class="result__word-dash"> - </span\n                ><span class="result__word-translate">').concat(t[Number(r)].wordTranslate,"</span>\n              </div>\n            </div>"));return n},t.prototype.playAudio=function(t){var e=document.querySelector("audio");e.src=t?"assets/audio/correct.mp3":"assets/audio/wrong.mp3",e.play()},t.prototype.getRandomIntInclusive=function(t,e,n){void 0===n&&(n=-1);var r=Math.ceil(t),s=Math.floor(e),i=Math.floor(Math.random()*(s-r+1))+r;return i===n?this.getRandomIntInclusive(t,e,n):i},t}();var q=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}))},M=function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},H=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))};const G=function(){function t(){this.countDayGameSprint=0,this.countNewTodayWordsSprint=0,this.maxRightAnswersSprint=0,this.persentRightAnswerSprint=0,this.countRightAnswersSprint=0,this.countNumQuestionsSprint=0,this.unicNotTodayWordsSprint=[],this.unicTodayUseWordsSprint=[],this.countDayGameAudiobattle=0,this.countNewTodayWordsAudiobattle=0,this.maxRightAnswersAudiobattle=0,this.persentRightAnswerAudiobattle=0,this.countRightAnswersAudiobattle=0,this.countNumQuestionsAudiobattle=0,this.unicNotTodayWordsAudiobattle=[],this.unicTodayUseWordsAudiobattle=[],this.countDayGame=0,this.countNewTodayWords=0,this.maxRightAnswers=0,this.persentRightAnswer=0}return t.prototype.getStatistic=function(){return q(this,void 0,void 0,(function(){var t,e,n;return M(this,(function(r){switch(r.label){case 0:return[4,this.audiobattleStatistic()];case 1:return r.sent(),[4,this.sprintStatistic()];case 2:return r.sent(),this.persentRightAnswerSprint=Number.isNaN(Math.round(this.countRightAnswersSprint/this.countNumQuestionsSprint))?0:Math.round(this.countRightAnswersSprint/this.countNumQuestionsSprint*100),this.persentRightAnswerAudiobattle=Number.isNaN(Math.round(this.countRightAnswersAudiobattle/this.countNumQuestionsAudiobattle))?0:Math.round(this.countRightAnswersAudiobattle/this.countNumQuestionsAudiobattle*100),this.countDayGame=this.countDayGameAudiobattle+this.countDayGameSprint,this.persentRightAnswer=Math.round((this.countRightAnswersSprint+this.countRightAnswersAudiobattle)/(this.countNumQuestionsSprint+this.countNumQuestionsAudiobattle)*100),this.persentRightAnswer=Number.isNaN(this.persentRightAnswer)?0:this.persentRightAnswer,this.maxRightAnswers=Math.max(this.maxRightAnswersAudiobattle,this.maxRightAnswersSprint),t=Array.from(new Set(H(H([],this.unicNotTodayWordsSprint,!0),this.unicNotTodayWordsAudiobattle,!0))),e=Array.from(new Set(H(H([],this.unicTodayUseWordsAudiobattle,!0),this.unicTodayUseWordsSprint,!0))),n=new Set(H(H([],t,!0),e,!0)),this.countNewTodayWords=Array.from(n).length-t.length,document.getElementById(i).innerHTML=this.drawStatistic(),[2]}}))}))},t.prototype.drawStatistic=function(){return'\n    <div class="statistic__section">\n    <div class="statistic__section-container">\n      <div class="statistic__block">\n        <h2 class="statistic__title">Статистика</h2>\n        <h3 class="statistic__subtitle">Общая статистика за день</h3>\n        <div class="statistic__container">\n          <div class="statistic__point-container">\n            <span class="statistic__point-text">Количество сыгранных игр:</span\n            ><span class="statistic__point-data">'.concat(this.countDayGame,'</span>\n          </div>\n          <div class="statistic__point-container">\n            <span class="statistic__point-text">Количество новых слов:</span\n            ><span class="statistic__point-data">').concat(this.countNewTodayWords,'</span>\n          </div>\n          <div class="statistic__point-container">\n            <span class="statistic__point-text">Процент правильных ответов:</span\n            ><span class="statistic__point-data">').concat(this.persentRightAnswer,'</span>\n          </div>\n          <div class="statistic__point-container">\n            <span class="statistic__point-text">Самая длинная серия правильных ответов:</span\n            ><span class="statistic__point-data">').concat(this.maxRightAnswers,'</span>\n          </div>\n        </div>\n      </div>\n      <div class="statistic__block">\n        <h3 class="statistic__subtitle">Статистика по играм</h3>\n        <div class="statistic__game-block">\n          <div class="statistic__container">\n            ').concat(this.drawGameStatistic("Спринт",this.countDayGameSprint,this.countNewTodayWordsSprint,this.persentRightAnswerSprint,this.maxRightAnswersSprint),'\n          </div>\n          <div class="statistic__container">\n            ').concat(this.drawGameStatistic("Аудиовызов",this.countDayGameAudiobattle,this.countNewTodayWordsAudiobattle,this.persentRightAnswerAudiobattle,this.maxRightAnswersAudiobattle),"\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n    ")},t.prototype.audiobattleStatistic=function(){return q(this,void 0,void 0,(function(){var t,e,n,r,s,i,a,o,c;return M(this,(function(u){switch(u.label){case 0:return this.countDayGameAudiobattle=0,this.countNewTodayWordsAudiobattle=0,this.maxRightAnswersAudiobattle=0,this.countRightAnswersAudiobattle=0,this.countNumQuestionsAudiobattle=0,[4,f.getUserStatistics()];case 1:for(t=u.sent(),e=y(),n=[],r=[],s=[],i=0;i<t.optional.statistics.audio.length;i+=1)t.optional.statistics.audio[i].date!==e&&r.push.apply(r,t.optional.statistics.audio[i].useWords),t.optional.statistics.audio[i].date===e&&(n.push(t.optional.statistics.audio[i]),s.push.apply(s,t.optional.statistics.audio[i].useWords));for(this.countDayGameAudiobattle=n.length,i=0;i<n.length;i+=1)this.maxRightAnswersAudiobattle=n[i].maxRightAnswers>this.maxRightAnswersAudiobattle?n[i].maxRightAnswers:this.maxRightAnswersAudiobattle,this.countRightAnswersAudiobattle+=n[i].countRightAnswers,this.countNumQuestionsAudiobattle+=n[i].countNumQuestions;return a=new Set(r),o=new Set(s),this.unicNotTodayWordsAudiobattle=Array.from(a),this.unicTodayUseWordsAudiobattle=Array.from(o),c=new Set(H(H([],this.unicNotTodayWordsAudiobattle,!0),this.unicTodayUseWordsAudiobattle,!0)),this.countNewTodayWordsAudiobattle=Array.from(c).length-this.unicNotTodayWordsAudiobattle.length,[2]}}))}))},t.prototype.sprintStatistic=function(){return q(this,void 0,void 0,(function(){var t,e,n,r,s,i,a,o,c;return M(this,(function(u){switch(u.label){case 0:return this.countDayGameSprint=0,this.countNewTodayWordsSprint=0,this.maxRightAnswersSprint=0,this.countRightAnswersSprint=0,this.countNumQuestionsSprint=0,[4,f.getUserStatistics()];case 1:for(t=u.sent(),e=y(),n=[],r=[],s=[],i=0;i<t.optional.statistics.sprint.length;i+=1)t.optional.statistics.sprint[i].date!==e&&r.push.apply(r,t.optional.statistics.sprint[i].useWords),t.optional.statistics.sprint[i].date===e&&(n.push(t.optional.statistics.sprint[i]),s.push.apply(s,t.optional.statistics.sprint[i].useWords));for(this.countDayGameSprint=n.length,i=0;i<n.length;i+=1)this.maxRightAnswersSprint=n[i].maxRightAnswers>this.maxRightAnswersSprint?n[i].maxRightAnswers:this.maxRightAnswersSprint,this.countRightAnswersSprint+=n[i].countRightAnswers,this.countNumQuestionsSprint+=n[i].countNumQuestions;return a=new Set(r),o=new Set(s),this.unicNotTodayWordsSprint=Array.from(a),this.unicTodayUseWordsSprint=Array.from(o),c=new Set(H(H([],this.unicNotTodayWordsSprint,!0),this.unicTodayUseWordsSprint,!0)),this.countNewTodayWordsSprint=Array.from(c).length-this.unicNotTodayWordsSprint.length,[2]}}))}))},t.prototype.drawGameStatistic=function(t,e,n,r,s){return'\n      <h4 class="statistic__container-title">'.concat(t,'</h4>\n      <div class="statistic__point-container">\n        <span class="statistic__point-text">Количество сыгранных игр:</span\n        ><span class="statistic__point-data">').concat(e,'</span>\n      </div>\n      <div class="statistic__point-container">\n        <span class="statistic__point-text">Количество новых слов:</span\n        ><span class="statistic__point-data">').concat(n,'</span>\n      </div>\n      <div class="statistic__point-container">\n        <span class="statistic__point-text">Процент правильных ответов:</span\n        ><span class="statistic__point-data">').concat(r,'</span>\n      </div>\n      <div class="statistic__point-container">\n        <span class="statistic__point-text">Самая длинная серия правильных ответов:</span\n        ><span class="statistic__point-data">').concat(s,"</span>\n      </div>\n  ")},t.prototype.drawNoAutorization=function(){return'\n    <div class="statistic__section">\n      <div class="statistic__section-container">\n        <h2 lass="statistic__title" >Статистика доступна только для авторизированных пользователей<h2/>\n      <div/>\n    <div/>\n    '},t}();const W=function(){function t(){}return t.prototype.draw=function(t){var e=t.isAuthorized;document.getElementById(i).innerHTML='\n    <section class="tutorial">\n      <ul class="tutorial__list">\n        '.concat(this.drawLinks(6),"\n        ").concat(e?'<li class="tutorial__item"><a href="#tutorialPage?group='.concat(7,'"  class="group--').concat(7,'">Сложные</a></li>'):"","\n      </ul>\n    </section>\n        ")},t.prototype.drawLinks=function(t){return function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}([],Array(t),!0).map((function(t,e){return' <li class="tutorial__item">\n              <a href="#tutorialPage?group='.concat(e+1,'" class="group--').concat(e+1,'">Раздел</a>\n            </li>')})).join("")},t}();const U=function(){function t(t){var e=this,n=t.onHandleLoginSuccess;this.isLogin=!0,this.handleLogin=function(t){t.preventDefault(),e.isLogin=!0,e.reDraw()},this.handleSignup=function(t){t.preventDefault(),e.isLogin=!1,e.reDraw()},this.onHandleLoginSuccess=n}return t.prototype.draw=function(){var t=this,e=document.body,n=document.createElement("section");n.classList.add("form"),n.innerHTML='\n        <div class="form__overlay">\n            <div class="form__container">\n            <button class="btn  btn--close">Close</button>\n            <h3 class="form__title">'.concat(this.isLogin?l.login:l.signup,'</h3>\n            <form action="" class="form__body" id="accountForm">\n                ').concat(this.isLogin?"":'\n                  <div class="form__line">\n                    <input type="text" name="name" placeholder="Имя" minLength="2" maxLength="25">\n                    <div class="form__error"></div>\n                  </div>\n                  ','\n                <div class="form__line">\n                  <input type="email" name="email" placeholder="Email" >\n                  <div class="form__error"></div>\n                </div>\n                <div class="form__line">\n                  <input type="password" name="password" placeholder="Пароль" maxLength="25" >\n                  <div class="form__error"></div>\n                </div>\n                <div class="form__line">\n                  <label class="input__label">\n                      <input type="checkbox" id="showPassword"> Показать пароль\n                  </label>\n                </div>\n                <div class="form__line">\n                  <div class="form__error" id="serverError"></div>\n                </div>\n                <button class="btn  btn--long  btn--submit">').concat(this.isLogin?l.login:l.signup,"</button>\n            </form>\n            ").concat(this.isLogin?'\n              <p class="form__line form__line--last">\n                  Нет аккаунта? <a href="" id="signupLink">'.concat(l.signup,"</a>\n              </p>\n              "):'\n              <p class="form__line form__line--last">\n                Есть аккаунт? <a href="" id="loginLink">'.concat(l.login,"</a>\n              </p>\n              "),"\n            </div>\n        </div>\n        "),e.appendChild(n),n.querySelector("input").focus(),document.querySelector(".btn--close").addEventListener("click",this.remove),document.querySelector(".form__overlay").addEventListener("click",(function(e){e.target.classList.contains("form__overlay")&&t.remove()}));var r=document.querySelector("#accountForm");r.addEventListener("keyup",(function(e){"Escape"!==e.key&&"Esc"!==e.key||t.remove()})),this.clean();var s=document.querySelector("#showPassword"),i=r.querySelector('[name="password"]');s.addEventListener("input",(function(t){t.target.checked?i.type="text":i.type="password"})),r.addEventListener("submit",(function(e){return n=t,s=void 0,a=function(){var t,n,s,i,a,o,c,l,d,h,p,v,g,m,_,y;return function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(w){switch(w.label){case 0:if(e.preventDefault(),t=document.querySelectorAll(".form__error"),Array.from(t).forEach((function(t){t.textContent=""})),document.querySelector("#serverError").textContent="",!this.validate())return[2];if(n=r.elements,s=n.name,i=n.email,a=n.password,!this.isLogin)return[3,5];d=i.value.trim(),h=a.value.trim(),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,f.signin({email:d,password:h})];case 2:return o=w.sent(),v=o.name,g=o.token,m=o.refreshToken,_=o.userId,localStorage.setItem(u.token,g),localStorage.setItem(u.refreshToken,m),localStorage.setItem(u.userId,_),localStorage.setItem(u.userName,v),this.onHandleLoginSuccess(),this.remove(),[3,4];case 3:return c=w.sent(),console.error(c),document.querySelector("#serverError").textContent=c.message,[3,4];case 4:return[3,10];case 5:l=s.value,d=i.value,h=a.value,w.label=6;case 6:return w.trys.push([6,9,,10]),[4,f.createUser({name:l,email:d,password:h})];case 7:return w.sent(),[4,f.signin({email:d,password:h})];case 8:return p=w.sent(),v=p.name,g=p.token,m=p.refreshToken,_=p.userId,localStorage.setItem(u.token,g),localStorage.setItem(u.refreshToken,m),localStorage.setItem(u.userId,_),localStorage.setItem(u.userName,v),this.onHandleLoginSuccess(),this.remove(),[3,10];case 9:return y=w.sent(),console.error("Error ".concat(y)),document.querySelector("#serverError").textContent=y.message,[3,10];case 10:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{c(a.next(t))}catch(t){e(t)}}function o(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,o)}c((a=a.apply(n,s||[])).next())}));var n,s,i,a}));var a=document.querySelector("#signupLink");null==a||a.addEventListener("click",this.handleSignup);var o=document.querySelector("#loginLink");null==o||o.addEventListener("click",this.handleLogin)},t.prototype.validate=function(){var t=document.querySelector("#accountForm").querySelectorAll("input"),e=[];return Array.from(t).forEach((function(t){var n,r,s;"name"===t.name&&t.value.trim().length<2&&((null===(n=t.closest(".form__line"))||void 0===n?void 0:n.querySelector(".form__error")).textContent="Минимальная длина имени 2 символа",e.push(t)),"email"!==t.name||/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i.test(t.value)||((null===(r=t.closest(".form__line"))||void 0===r?void 0:r.querySelector(".form__error")).textContent="Нужно ввести валидный email",e.push(t)),"password"===t.name&&t.value.trim().length<8&&((null===(s=t.closest(".form__line"))||void 0===s?void 0:s.querySelector(".form__error")).textContent="Минимальная длина пароля 8 символов",e.push(t))})),0===e.length||(e[0].focus(),!1)},t.prototype.clean=function(){var t=document.querySelector("#accountForm").querySelectorAll("input");Array.from(t).forEach((function(t){t.value=""}))},t.prototype.reDraw=function(){var t=this,e=document.querySelector(".form");document.querySelector(".form__container").style.left="150%",setTimeout((function(){e.remove(),t.draw()}),300)},t.prototype.remove=function(){var t=document.querySelector(".form");document.querySelector(".form__container").style.left="150%",setTimeout((function(){t.remove()}),300)},t}(),j=function(){function t(){var t=this;this.page=0,this.group=0,this.isGameFromTutorial=!1,this.isAuthorized=!1,this.resetPages=function(){t.tutorialPage.sound.stop(),clearInterval(t.sprintPage.timerId),document.removeEventListener("keypress",t.audioGamePage.handleKeyboard),document.removeEventListener("keyup",t.sprintPage.handleKeyboard)},this.handlePageChange=function(e){var n,r=e.group,s=e.page;t.group=r,t.page=s,n=t.page,localStorage.setItem(u.currentPage,String(n))},this.handleGameClick=function(){t.isGameFromTutorial=!0},this.handleLogin=function(){document.querySelector(".btn--login").textContent=l.logout,t.isAuthorized=!0,t.router.switchRoute()},this.homePage=new c,this.tutorialPage=new k({onHandlePageChange:this.handlePageChange,onHandleGameClick:this.handleGameClick}),this.mainTutorialPage=new W,this.accountForm=new U({onHandleLoginSuccess:this.handleLogin}),this.sprintPage=new C,this.audioGamePage=new E,this.statisticPage=new G,this.loader=new S;var e={home:function(){return t.drawHomePage()},tutorial:function(){return t.drawMainTutorialPage()},tutorialPage:function(){return t.drawTutorialPage()},sprintGame:function(){return t.drawSprintPage()},audioGame:function(){return t.drawAudioGamePage()},statistics:function(){return t.drawStatisticsPage()}};this.router=new s({routesActions:e,callback:this.resetPages})}return t.prototype.init=function(){var t;this.router.init();var e=Number(null===(t=this.router.param)||void 0===t?void 0:t.replace(o,""))-1;e&&(this.group=e);var n=m();null!==n&&0!==n&&(this.page=Number(n)),localStorage.getItem(u.token)&&(this.isAuthorized=!0),this.isAuthorized&&(document.querySelector(".btn--login").textContent=l.logout),this.handleLoginBtn()},t.prototype.drawHomePage=function(){this.homePage.draw()},t.prototype.drawMainTutorialPage=function(){this.mainTutorialPage.draw({isAuthorized:this.isAuthorized}),g()},t.prototype.drawTutorialPage=function(){var t;this.loader.draw();var e=Number(null===(t=this.router.param)||void 0===t?void 0:t.replace(o,""))-1;this.group=e;var n=m();null!==n&&(this.page=Number(n)),this.tutorialPage.init({group:this.group,page:this.page,isAuthorized:this.isAuthorized})},t.prototype.drawSprintPage=function(){var t,e=Number(null===(t=this.router.param)||void 0===t?void 0:t.replace(o,""))-1;Number.isNaN(e)||this.isGameFromTutorial||this.restoreDataForGame(e),this.isGameFromTutorial||this.sprintPage.selectLevel(),this.isGameFromTutorial&&(console.log("\n        drawSprintPage\n        group = ".concat(this.group,", page = ").concat(this.page)),this.isGameFromTutorial=!1,this.sprintPage.startFromPage(this.group,this.page))},t.prototype.drawAudioGamePage=function(){var t,e=Number(null===(t=this.router.param)||void 0===t?void 0:t.replace(o,""))-1;Number.isNaN(e)||this.isGameFromTutorial||this.restoreDataForGame(e),this.isGameFromTutorial||this.audioGamePage.selectLevel(),this.isGameFromTutorial&&(console.log("\n      drawAudioGamePage\n        group = ".concat(this.group,", page = ").concat(this.page)),this.isGameFromTutorial=!1,this.audioGamePage.startFromPage(this.group,this.page))},t.prototype.restoreDataForGame=function(t){this.group=t,this.isGameFromTutorial=!0},t.prototype.drawStatisticsPage=function(){var t=document.getElementById(i);this.isAuthorized?this.statisticPage.getStatistic():t.innerHTML=this.statisticPage.drawNoAutorization()},t.prototype.handleLoginBtn=function(){var t=this;document.querySelector(".btn--login").addEventListener("click",(function(e){var n,r=e.target;if(r){var s=null===(n=r.textContent)||void 0===n?void 0:n.trim();s===l.login&&t.accountForm.draw(),s===l.logout&&(localStorage.removeItem(u.token),localStorage.removeItem(u.refreshToken),localStorage.removeItem(u.userId),localStorage.removeItem(u.userName),t.isAuthorized=!1,r.textContent=l.login,t.router.switchRoute())}}))},t}();(new(function(){function t(){this.controller=new j}return t.prototype.start=function(){return t=this,e=void 0,r=function(){return function(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(t){switch(t.label){case 0:return[4,this.controller.init()];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(s,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r},t}())).start()})()})();